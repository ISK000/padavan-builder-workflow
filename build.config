### Target Vendor/Product
CONFIG_VENDOR=XIAOMI
CONFIG_PRODUCT=MT7628
CONFIG_FIRMWARE_PRODUCT_ID="MI-4C"

############################################################
### Linux kernel configuration
############################################################
CONFIG_FIRMWARE_CPU_SLEEP=y
CONFIG_FIRMWARE_WIFI2_DRIVER=4.0
CONFIG_FIRMWARE_ENABLE_IPV6=y

# QoS/IMQ/IFB ОТКЛЮЧЕНЫ (экономим место/CPU)
# CONFIG_FIRMWARE_INCLUDE_QOS is not set
# CONFIG_FIRMWARE_INCLUDE_IMQ is not set
# CONFIG_FIRMWARE_INCLUDE_IFB is not set

# IPSet/iptables нужны zapret/маршрутизации
CONFIG_FIRMWARE_INCLUDE_IPSET=y
CONFIG_FIRMWARE_INCLUDE_IPTABLES=y

# CIFS, NFS не нужны
# CONFIG_FIRMWARE_INCLUDE_NFSC is not set
# CONFIG_FIRMWARE_INCLUDE_CIFS is not set

CONFIG_FIRMWARE_INCLUDE_SHORTCUT_FE=y

############################################################
### Userspace configuration
############################################################
# Языки WebUI: оставим только русский (остальные off)
CONFIG_FIRMWARE_INCLUDE_LANG_RU=y

# Диагностика и софт — по минимуму
# CONFIG_FIRMWARE_INCLUDE_TCPDUMP is not set
# CONFIG_FIRMWARE_INCLUDE_SOCAT is not set
# CONFIG_FIRMWARE_INCLUDE_NDISC6_RDISC6 is not set
# CONFIG_FIRMWARE_INCLUDE_WINS is not set
# CONFIG_FIRMWARE_INCLUDE_SMBD_SYSLOG is not set
# CONFIG_FIRMWARE_INCLUDE_TESTPARM is not set
# CONFIG_FIRMWARE_INCLUDE_RPL2TP is not set

# WPA/WPA2 для AP
CONFIG_FIRMWARE_INCLUDE_WPAD=y

# HTTPS/DDNS нужны, т.к. OpenVPN тянет OpenSSL
CONFIG_FIRMWARE_INCLUDE_DDNS_SSL=y
CONFIG_FIRMWARE_INCLUDE_HTTPS=y

# SSH: лёгкий dropbear вместо openssh
CONFIG_FIRMWARE_INCLUDE_DROPBEAR=y
CONFIG_FIRMWARE_INCLUDE_DROPBEAR_FAST_CODE=y
# CONFIG_FIRMWARE_INCLUDE_OPENSSH is not set
# CONFIG_FIRMWARE_INCLUDE_SFTP is not set

# OpenVPN клиент (XOR добавит твой prebuild.sh)
CONFIG_FIRMWARE_INCLUDE_OPENVPN=y

# WireGuard/AmneziaWG — выключены в LITE
# CONFIG_FIRMWARE_INCLUDE_WIREGUARD is not set
# CONFIG_FIRMWARE_INCLUDE_AMNEZIAWG is not set

# OpenSSL: эллиптические кривые — да; бинарник openssl — нет (экономим)
CONFIG_FIRMWARE_INCLUDE_OPENSSL_EC=y
# CONFIG_FIRMWARE_INCLUDE_OPENSSL_EXE is not set

# Медиа/прокси/прочее — всё off
# CONFIG_FIRMWARE_INCLUDE_XUPNPD is not set
# CONFIG_FIRMWARE_INCLUDE_TOR is not set
# CONFIG_FIRMWARE_INCLUDE_TOR_GEOIP is not set
# CONFIG_FIRMWARE_INCLUDE_TOR_GEOIPV6 is not set
# CONFIG_FIRMWARE_INCLUDE_OBFS4 is not set
# CONFIG_FIRMWARE_INCLUDE_PRIVOXY is not set
# CONFIG_FIRMWARE_INCLUDE_DNSCRYPT is not set
# CONFIG_FIRMWARE_INCLUDE_STUBBY is not set
# CONFIG_FIRMWARE_INCLUDE_DOH is not set
CONFIG_FIRMWARE_INCLUDE_CURL=y
# CONFIG_FIRMWARE_INCLUDE_QUIC is not set
# CONFIG_FIRMWARE_INCLUDE_QUIC_NGTCP2 is not set

# ZRAM помогает с 64MB RAM
CONFIG_FIRMWARE_INCLUDE_ZRAM=y

# Скрипты и планировщик
CONFIG_FIRMWARE_INCLUDE_CROND=y
CONFIG_FIRMWARE_INCLUDE_WGET=y

# --- NFQUEUE для zapret ---
CONFIG_FIRMWARE_INCLUDE_NFQWS=y


### Include AmneziaWG kernel module
CONFIG_FIRMWARE_INCLUDE_AMNEZIAWG=y


# LUA, EOIP и прочее — off
# CONFIG_FIRMWARE_INCLUDE_LUA is not set
# CONFIG_FIRMWARE_INCLUDE_EOIP is not set
# CONFIG_FIRMWARE_INCLUDE_VLMCSD is not set
# CONFIG_FIRMWARE_INCLUDE_IPERF3 is not set

# Сборка под размер
CONFIG_CC_OPTIMIZE_FOR_SIZE=y


