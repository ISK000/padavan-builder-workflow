### Target Vendor/Product (R3G = MT7621)
CONFIG_VENDOR=XIAOMI
CONFIG_PRODUCT=MT7621
CONFIG_FIRMWARE_PRODUCT_ID="MI-R3G"

############################################################
### Linux kernel configuration
############################################################
# Опциональный разгон/даунклок:
# CONFIG_FIRMWARE_CPU_900MHZ=y
CONFIG_FIRMWARE_CPU_SLEEP=y

# Драйверы Wi-Fi под R3G (7603/7612)
CONFIG_FIRMWARE_WIFI2_DRIVER=4.1
CONFIG_FIRMWARE_WIFI5_DRIVER=3.0

# IPv6 (нужно для части VPN/обходов)
CONFIG_FIRMWARE_ENABLE_IPV6=y

# USB и файловые системы для флешки/диска (под Entware/Xray)
CONFIG_FIRMWARE_ENABLE_USB=y
CONFIG_FIRMWARE_ENABLE_FAT=y
CONFIG_FIRMWARE_ENABLE_EXFAT=y
CONFIG_FIRMWARE_ENABLE_EXT4=y
CONFIG_FIRMWARE_ENABLE_FUSE=y
CONFIG_FIRMWARE_ENABLE_SWAP=y

# Полезные USB-модули (по желанию, немного места):
# CONFIG_FIRMWARE_INCLUDE_UVC=y
# CONFIG_FIRMWARE_INCLUDE_HID=y
# CONFIG_FIRMWARE_INCLUDE_SERIAL=y
# CONFIG_FIRMWARE_INCLUDE_AUDIO=y

# XFRM (IPsec) — иногда пригождается
CONFIG_FIRMWARE_INCLUDE_XFRM=y

# Сетевые ускоряшки
CONFIG_FIRMWARE_INCLUDE_SHORTCUT_FE=y

# Для zapret/маршрутизации
CONFIG_FIRMWARE_INCLUDE_IPSET=y
CONFIG_FIRMWARE_INCLUDE_IPTABLES=y

# NFS/CIFS на роутере НЕ тащим (экономим размер):
# CONFIG_FIRMWARE_INCLUDE_NFSD is not set
# CONFIG_FIRMWARE_INCLUDE_NFSC is not set
# CONFIG_FIRMWARE_INCLUDE_CIFS is not set

############################################################
### Userspace configuration
############################################################
# Языки WebUI
CONFIG_FIRMWARE_INCLUDE_LANG_RU=y
# Остальные отключены

# Хранилища/обслуживание дисков
# (если нужен NTFS с FUSE — можно включить; он тяжеловат)
# CONFIG_FIRMWARE_INCLUDE_NTFS_3G=y
CONFIG_FIRMWARE_INCLUDE_HDPARM=y
CONFIG_FIRMWARE_INCLUDE_PARTED=y

# Файловые сервисы — отключаем (не нужны для VPN-роутера)
# CONFIG_FIRMWARE_INCLUDE_SMBD is not set
# CONFIG_FIRMWARE_INCLUDE_SMBD_SYSLOG is not set
# CONFIG_FIRMWARE_INCLUDE_FTPD is not set
# CONFIG_FIRMWARE_INCLUDE_FTPD_SSL is not set
# CONFIG_FIRMWARE_INCLUDE_LPRD is not set
# CONFIG_FIRMWARE_INCLUDE_U2EC is not set
# CONFIG_FIRMWARE_INCLUDE_USBIP is not set

# Диагностика (по желанию оставь tcpdump — иногда очень выручает)
CONFIG_FIRMWARE_INCLUDE_TCPDUMP=y
# CONFIG_FIRMWARE_INCLUDE_SOCAT is not set
# CONFIG_FIRMWARE_INCLUDE_NDISC6_RDISC6 is not set

# VPN и обфускация
CONFIG_FIRMWARE_INCLUDE_OPENVPN=y
CONFIG_FIRMWARE_INCLUDE_WIREGUARD=y
CONFIG_FIRMWARE_INCLUDE_AMNEZIAWG=y     # <-- AmneziaWG в веб-морде
CONFIG_FIRMWARE_INCLUDE_OBFS4=y         # obfs4proxy (если вдруг пригодится)

# EAP-PEAP (редко нужно; можешь выключить)
# CONFIG_FIRMWARE_INCLUDE_EAP_PEAP is not set

# HTTPS/DDNS, Web
CONFIG_FIRMWARE_INCLUDE_DDNS_SSL=y
CONFIG_FIRMWARE_INCLUDE_HTTPS=y

# SSH — берём лёгкий dropbear
CONFIG_FIRMWARE_INCLUDE_DROPBEAR=y
CONFIG_FIRMWARE_INCLUDE_DROPBEAR_FAST_CODE=y
# CONFIG_FIRMWARE_INCLUDE_OPENSSH is not set
# CONFIG_FIRMWARE_INCLUDE_SFTP is not set

# OpenSSL
CONFIG_FIRMWARE_INCLUDE_OPENSSL_EC=y
# Бинарник openssl на роутере — выключим (экономия, сертификаты сделаем вне)
# CONFIG_FIRMWARE_INCLUDE_OPENSSL_EXE is not set

# Прокси/медиа — всё off (тяжёлые):
# CONFIG_FIRMWARE_INCLUDE_TOR is not set
# CONFIG_FIRMWARE_INCLUDE_TOR_GEOIP is not set
# CONFIG_FIRMWARE_INCLUDE_MINIDLNA is not set
# CONFIG_FIRMWARE_INCLUDE_TRANSMISSION is not set
# CONFIG_FIRMWARE_INCLUDE_TRANSMISSION_WEB_CONTROL is not set
# CONFIG_FIRMWARE_INCLUDE_ARIA is not set
# CONFIG_FIRMWARE_INCLUDE_ARIA_WEB_CONTROL is not set
# CONFIG_FIRMWARE_INCLUDE_PRIVOXY is not set
# CONFIG_FIRMWARE_INCLUDE_DNSCRYPT is not set
# CONFIG_FIRMWARE_INCLUDE_STUBBY is not set
# CONFIG_FIRMWARE_INCLUDE_DOH is not set
CONFIG_FIRMWARE_INCLUDE_CURL=y
CONFIG_FIRMWARE_INCLUDE_WPAD=y
CONFIG_FIRMWARE_INCLUDE_ZRAM=y
CONFIG_FIRMWARE_INCLUDE_WGET=y
CONFIG_FIRMWARE_INCLUDE_CROND=y
CONFIG_FIRMWARE_INCLUDE_QUIC=y
# CONFIG_FIRMWARE_INCLUDE_QUIC_NGTCP2 is not set

# Не нужно:
# CONFIG_FIRMWARE_INCLUDE_LUA is not set
# CONFIG_FIRMWARE_INCLUDE_EOIP is not set
# CONFIG_FIRMWARE_INCLUDE_VLMCSD is not set
# CONFIG_FIRMWARE_INCLUDE_IPERF3 is not set

# zapret (desync DPI)
CONFIG_FIRMWARE_INCLUDE_NFQWS=y

# Ужать размер образа
CONFIG_CC_OPTIMIZE_FOR_SIZE=y
